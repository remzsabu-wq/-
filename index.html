<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>2D Shooting</title>
  <style>
    body {
      margin: 0;
      background: #000;
      overflow: hidden;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #000;
    }
  </style>
</head>
<body>
<canvas id="game" width="480" height="640"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// 画像読み込み
const playerImg = new Image();
playerImg.src = "images/player.png";

const enemyImg = new Image();
enemyImg.src = "images/enemy.png";

// プレイヤー
const player = {
  x: 220,
  y: 520,
  w: 40,
  h: 40,
  speed: 5
};

// 敵
const enemy = {
  x: 220,
  y: 100,
  w: 40,
  h: 40
};

// 入力
const keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

function update() {
  if (keys["ArrowLeft"]) player.x -= player.speed;
  if (keys["ArrowRight"]) player.x += player.speed;

  player.x = Math.max(0, Math.min(canvas.width - player.w, player.x));
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);
  ctx.drawImage(enemyImg, enemy.x, enemy.y, enemy.w, enemy.h);
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

// 画像ロード後スタート
Promise.all([
  new Promise(r => playerImg.onload = r),
  new Promise(r => enemyImg.onload = r)
]).then(loop);
</script>
</body>
</html>
